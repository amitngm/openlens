{
	"info": {
		"_postman_id": "qa-agent-api-collection-v2",
		"name": "QA Agent API - Complete Collection",
		"description": "Complete API collection for QA Agent including QA Buddy V2 (recommended), Legacy endpoints, and all utilities",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"version": "2.0.0"
	},
	"item": [
		{
			"name": "Health & Utility",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": ["{{base_url}}"],
							"path": ["health"]
						},
						"description": "Check API health status"
					}
				},
				{
					"name": "API Documentation (Swagger)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/docs",
							"host": ["{{base_url}}"],
							"path": ["docs"]
						},
						"description": "Open Swagger UI documentation"
					}
				}
			]
		},
		{
			"name": "QA Buddy V2 (Recommended)",
			"description": "Simplified 5-step flow: S1 Login → S2 Trace Pages → S3 Detect Access → S4 Health Check → S5 Test Execution",
			"item": [
				{
					"name": "Start Discovery",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"application_url\": \"https://n1devcmp-user.airteldev.com\",\n    \"username\": \"your-username\",\n    \"password\": \"your-password\",\n    \"env\": \"staging\",\n    \"config_name\": \"keycloak\",\n    \"test_prompt\": null\n}"
						},
						"url": {
							"raw": "{{base_url}}/qa-buddy-v2/discover",
							"host": ["{{base_url}}"],
							"path": ["qa-buddy-v2", "discover"]
						},
						"description": "Start QA Buddy V2 discovery flow (S1-S5). Returns discovery_id immediately."
					},
					"response": []
				},
				{
					"name": "Start Discovery (SSE Stream)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"application_url\": \"https://n1devcmp-user.airteldev.com\",\n    \"username\": \"your-username\",\n    \"password\": \"your-password\",\n    \"env\": \"staging\",\n    \"config_name\": \"keycloak\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/qa-buddy-v2/discover/stream",
							"host": ["{{base_url}}"],
							"path": ["qa-buddy-v2", "discover", "stream"]
						},
						"description": "Start discovery with Server-Sent Events (SSE) for real-time progress updates"
					}
				},
				{
					"name": "Get Discovery Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/qa-buddy-v2/discover/{{discovery_id}}",
							"host": ["{{base_url}}"],
							"path": ["qa-buddy-v2", "discover", "{{discovery_id}}"]
						},
						"description": "Get discovery status and results. Shows current stage (S1-S5) and all results so far."
					}
				},
				{
					"name": "Execute Test (S5)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"test_prompt\": \"test all forms\",\n    \"test_type\": \"form_validation\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/qa-buddy-v2/discover/{{discovery_id}}/test",
							"host": ["{{base_url}}"],
							"path": ["qa-buddy-v2", "discover", "{{discovery_id}}", "test"]
						},
						"description": "Execute tests based on natural language prompt. Requires discovery to be completed (S1-S4 done).\n\nSupported prompts:\n- \"test all forms\" - Validates all form pages\n- \"test navigation\" - Tests link clicking\n- \"test tables\" - Checks table rendering\n- \"test login\" - Validates login flow"
					}
				}
			]
		},
		{
			"name": "Legacy Discovery",
			"description": "Original discovery endpoints (for backward compatibility)",
			"item": [
				{
					"name": "Start Discovery (Basic)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"ui_url\": \"https://n1devcmp-user.airteldev.com\",\n    \"username\": \"your-username\",\n    \"password\": \"your-password\",\n    \"env\": \"staging\",\n    \"config_name\": \"keycloak\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/discover",
							"host": ["{{base_url}}"],
							"path": ["discover"]
						}
					}
				},
				{
					"name": "Get Discovery Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/discover/{{discovery_id}}",
							"host": ["{{base_url}}"],
							"path": ["discover", "{{discovery_id}}"]
						}
					}
				}
			]
		},
		{
			"name": "Test Generation",
			"item": [
				{
					"name": "Generate Tests",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"discovery_id\": \"{{discovery_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/generate-tests",
							"host": ["{{base_url}}"],
							"path": ["generate-tests"]
						},
						"description": "Generate smoke tests from discovery results"
					}
				},
				{
					"name": "Get Generated Tests",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/tests/{{discovery_id}}",
							"host": ["{{base_url}}"],
							"path": ["tests", "{{discovery_id}}"]
						}
					}
				}
			]
		},
		{
			"name": "Test Execution",
			"item": [
				{
					"name": "Start Test Run",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"discovery_id\": \"{{discovery_id}}\",\n    \"suite\": \"smoke\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/run",
							"host": ["{{base_url}}"],
							"path": ["run"]
						},
						"description": "Start test execution from generated tests"
					}
				},
				{
					"name": "Get Run Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/run/{{run_id}}",
							"host": ["{{base_url}}"],
							"path": ["run", "{{run_id}}"]
						}
					}
				},
				{
					"name": "Get HTML Report",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/run/{{run_id}}/report.html",
							"host": ["{{base_url}}"],
							"path": ["run", "{{run_id}}", "report.html"]
						},
						"description": "Get full HTML report with embedded screenshots and evidence"
					}
				},
				{
					"name": "List All Runs",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/run/runs",
							"host": ["{{base_url}}"],
							"path": ["run", "runs"]
						}
					}
				},
				{
					"name": "Get Run Artifacts",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/run/{{run_id}}/artifacts",
							"host": ["{{base_url}}"],
							"path": ["run", "{{run_id}}", "artifacts"]
						}
					}
				}
			]
		},
		{
			"name": "Flow-based Tests",
			"item": [
				{
					"name": "Start Flow Run",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"flow_id\": \"public-ip-allocation\",\n    \"env\": \"staging\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/runs",
							"host": ["{{base_url}}"],
							"path": ["runs"]
						}
					}
				},
				{
					"name": "Get Flow Run Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/runs/{{run_id}}",
							"host": ["{{base_url}}"],
							"path": ["runs", "{{run_id}}"]
						}
					}
				},
				{
					"name": "Get Flow Run HTML Report",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/runs/{{run_id}}/report.html",
							"host": ["{{base_url}}"],
							"path": ["runs", "{{run_id}}", "report.html"]
						}
					}
				},
				{
					"name": "List All Flow Runs",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/runs",
							"host": ["{{base_url}}"],
							"path": ["runs"]
						}
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "discovery_id",
			"value": "f5864810-ca1",
			"type": "string"
		},
		{
			"key": "run_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "filename",
			"value": "screenshot_1.png",
			"type": "string"
		}
	]
}
