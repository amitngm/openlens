# Default values for qa-pr-dashboard
replicaCount: 2

image:
  frontend:
    repository: qa-pr-dashboard-frontend
    pullPolicy: IfNotPresent
    tag: "latest"
  api:
    repository: qa-pr-dashboard-api
    pullPolicy: IfNotPresent
    tag: "latest"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  frontend:
    type: ClusterIP
    port: 3000
    targetPort: 3000
  api:
    type: ClusterIP
    port: 8000
    targetPort: 8000

ingress:
  enabled: false
  className: "nginx"
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: qa-pr-dashboard.local
      paths:
        - path: /
          pathType: Prefix
  tls: []
  #  - secretName: qa-pr-dashboard-tls
  #    hosts:
  #      - qa-pr-dashboard.local

resources:
  frontend:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi
  api:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 200m
      memory: 256Mi

autoscaling:
  enabled: false
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

# Environment variables
env:
  # API Server environment variables
  api:
    NODE_ENV: production
    PORT: "8000"
    MONGODB_URI: "mongodb://mongodb-service:27017"
    DB_NAME: "qa_pr_dashboard"
    SKIP_MONGO: "false"
    # Add your Jira and GitHub configs via secrets
  # Frontend environment variables
  frontend:
    NODE_ENV: production
    PORT: "3000"
    API_URL: "http://qa-pr-dashboard-api:8000/api"
    NEXT_PUBLIC_API_URL: "http://qa-pr-dashboard-api:8000/api"

# Secrets (should be created separately)
secrets:
  # github:
  #   token: ""
  # jira:
  #   baseUrl: ""
  #   email: ""
  #   apiToken: ""
  #   projectKey: ""

# MongoDB configuration (if deploying MongoDB)
mongodb:
  enabled: false
  # Use external MongoDB service name
  serviceName: "mongodb-service"
  port: 27017
  # MongoDB resource configuration
  resources:
    requests:
      cpu: 250m
      memory: 1Gi
    limits:
      cpu: 1000m
      memory: 2Gi
  # Storage configuration
  storage:
    size: 50Gi
    storageClass: ""
    accessMode: ReadWriteOnce
  # Replica set configuration
  replicaCount: 1
  persistence:
    enabled: true
    size: 50Gi
    storageClass: ""

# Health checks
livenessProbe:
  frontend:
    httpGet:
      path: /
      port: 3000
    initialDelaySeconds: 30
    periodSeconds: 10
  api:
    httpGet:
      path: /api/health
      port: 8000
    initialDelaySeconds: 30
    periodSeconds: 10

readinessProbe:
  frontend:
    httpGet:
      path: /
      port: 3000
    initialDelaySeconds: 10
    periodSeconds: 5
  api:
    httpGet:
      path: /api/health
      port: 8000
    initialDelaySeconds: 10
    periodSeconds: 5

